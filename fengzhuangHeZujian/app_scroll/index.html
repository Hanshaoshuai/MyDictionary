<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="record.css"/>
	</head>
	<body>
		<div class="wrap" id="J_wrap">
			<div class="content">
			    <div class="banner">
			    		<p>狗年旺旺分获得记录</p>
			    	</div>
			    <div class="content_button" data-aspm="c9526">
			    	<div class="first">日期</div>
			        <!--<div class="laste laste_border">活期金额(元)</div>-->
			        <div class="first">旺旺分</div>
			        <div class="laste">备注</div>
			    </div>
			    <div class="list">
				    	<ul>
				    		<!--<li>
				    			<p class="first">12月20日</p>
				    			<p class="laste">10,124.00<span></span></p>
				    			<p class="first">+1246.00</p>
				    			<p class="laste">3255.00<span></span></p>
				    		</li>
				    		<li>
				    			<p class="first">12月20日</p>
				    			<p class="laste">10,124.00<span></span></p>
				    			<p class="first">+1246.00</p>
				    			<p class="laste">3255.00<span></span></p>
				    		</li>-->
				    	</ul>
				    	<div style="height:600px;background:#00C2C2;" id="buttom">我是宝</div>
		    		</div>
		    </div>
		</div>
		
		<script type="text/javascript">
			List= [{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				},{			//查询积点消费发放记录接口
					"bizDate":"2018年5月11号", 		// /** 业务日期 */
				    "amount":"1000.00", 		///** 交易金额和币种   */
					"delta":"1000.00", 			//余额变动数量
					"pointCount":"20000.00", 			///** 积分个数 */
					"memo":"兑换红包" 			//事件原因
				}]
			let datelist= [],			//列表数据			
			    pageNum= 1,				//请求列表页数
			    dataLength=null,			//列表的总长度
			    setTime=null;
			function getObjXy(obj,documentBox){
			    var xy = obj.getBoundingClientRect();
			    var top = xy.top-document.documentElement.clientTop+document.documentElement.scrollTop,//document.documentElement.clientTop 在IE67中始终为2，其他高级点的浏览器为0
			        bottom = xy.bottom,
			        left = xy.left-document.documentElement.clientLeft+document.documentElement.scrollLeft,//document.documentElement.clientLeft 在IE67中始终为2，其他高级点的浏览器为0
			        right = xy.right,
			        width = xy.width||right - left, //IE67不存在width 使用right - left获得
			        height = xy.height||bottom - top;
			
			    return {
			        top:top,
			        right:right,
			        bottom:bottom,
			        left:left,
			        width:width,
			        height:height
			    }
			}
			const page = {
			    init() {
			    		this.iscroll()
					this.pushHtml();
			    },
			    iscroll(){
			    		const box= document.getElementById('J_wrap');
			    		window.addEventListener('scroll', ()=> {
						let scrollTop = Math.floor(window.scrollY); 				// 当前滚动条位置    
					    let clientHeight = Math.ceil(window.innerHeight); 		// 设备窗口的高度（不会变）    
					    let scrollHeight = document.body.scrollHeight; 			// 滚动条总高度   
//					    console.log(scrollTop + clientHeight+'=='+scrollHeight)
			    			if((scrollTop + clientHeight)==scrollHeight){
			    				console.log(scrollTop + clientHeight+'=='+scrollHeight)
			    				let test = getObjXy(document.getElementById('buttom'));
							console.log("top:" + test.top + ", right:" + test.right + ", bottom:" + test.bottom + ", left:" + test.left);
			    				setTime=setTimeout(()=> {
			    					this.pushHtml();
			    				},1000)
			    			}
			    		})
			    },
			    pushHtml(){
			    		clearTimeout(setTime);
			    		if(dataLength!=pageNum){
					    	let thmlList='';
					    	let p=List;
				//	    	datelist.push(p);
					    	datelist[pageNum-1]=p;
					    	console.log(datelist);
					    	console.log(pageNum);
					    	for(var i=0; i<datelist.length; i++){
					    		console.log(datelist[i])
					    		for(var key in datelist[i]){
						    		thmlList+="<li>"+
						    			"<p class='first'>"+datelist[i][key].bizDate+"<font></font></p>"+
						    			"<p class='first'>"+datelist[i][key].pointCount+"<font></font></p>"+
						    			"<p class='laste'>"+datelist[i][key].memo+"<span></span></p>"+
						    		"</li>"
						    	}
					    	}
					    	document.querySelector('.list ul').innerHTML=thmlList;
					    	pageNum+= 1;
					    	dataLength=6;
					}
			    },
			}
			window.onload=function(){
				page.init();
			}
		</script>
	</body>
</html>
